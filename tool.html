<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tool - Studio Ajaib</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #0B0F19; }
        iframe { width: 100%; height: 100%; border: none; }
        
        /* Tombol Kembali yang Melayang */
        .float-back {
            position: fixed; top: 20px; left: 20px; z-index: 50;
            background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.1); color: white;
            padding: 10px 20px; border-radius: 50px;
            font-family: sans-serif; font-size: 14px; font-weight: bold;
            display: flex; align-items: center; gap: 8px;
            cursor: pointer; transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        .float-back:hover { background: #3B82F6; transform: translateX(5px); }
    </style>
</head>
<body>

    <!-- Tombol Kembali ke Dashboard -->
    <a href="dashboard.html" class="float-back">
        <i class="fas fa-arrow-left"></i> Kembali ke Dashboard
    </a>

    <!-- Container Iframe -->
    <iframe id="toolFrame" src="" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture; webcam; microphone" allowfullscreen></iframe>

    <script>
        // 1. CEK LOGIN (Keamanan: Hanya member yang bisa akses tool ini)
        const { createClient } = supabase
        const _supabase = createClient(
            'https://xhjwmhoxrszzrwsmqhxi.supabase.co', 
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhoandtaG94cnN6enJ3c21xaHhpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0NDg1MjUsImV4cCI6MjA4MzAyNDUyNX0.JfMp7BY0PMhTc3xV2CoM6fTLsHSIrLyJyj9WMgeVFDM'
        )

        async function checkAccess() {
            const { data: { session } } = await _supabase.auth.getSession()
            if (!session) window.location.href = "index.html"
        }
        checkAccess()

        // 2. LOGIC URL PARSER
        // Mengambil URL dari parameter ?src=...
        const urlParams = new URLSearchParams(window.location.search);
        let targetUrl = urlParams.get('src');

        if(targetUrl) {
            // Trik agar tampilan bersih (Direct Embed)
            // Jika user memasukkan link normal HF: https://huggingface.co/spaces/user/space
            // Kita ubah jadi mode embed: https://user-space.hf.space
            if (targetUrl.includes('huggingface.co/spaces/')) {
                // Jangan ubah jika URL sudah benar, tapi ini opsional
                // Jika ingin tampilan Full Clean tanpa header HF, gunakan URL "Direct" dari HF Space
                // Tapi iframe biasa pun sudah cukup oke.
            }
            document.getElementById('toolFrame').src = targetUrl;
        } else {
            alert("Tool tidak ditemukan!");
            window.location.href = "dashboard.html";
        }
    </script>
</body>
</html>
