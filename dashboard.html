<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Orbit</title>
    <link rel="shortcut icon" href="assets/logo.png" type="image/png">
    
    <!-- Tailwind & Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Font Serif elegan ala Claude (Merriweather/Newsreader) & Sans untuk UI -->
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,300;0,400;1,300&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        serif: ['Newsreader', 'serif'],
                        sans: ['Inter', 'sans-serif']
                    },
                    colors: {
                        paper: '#f9f9f8', // Warm off-white ala Claude
                        ink: '#383835',   // Soft black
                        accent: '#d97757' // Clay orange subtle
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.4s ease-out forwards',
                        'pop': 'pop 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                    },
                    keyframes: {
                        fadeIn: { '0%': { opacity: '0', transform: 'translateY(10px)' }, '100%': { opacity: '1', transform: 'translateY(0)' } },
                        pop: { '0%': { opacity: '0', transform: 'scale(0.95)' }, '100%': { opacity: '1', transform: 'scale(1)' } }
                    }
                }
            }
        }
    </script>
    
    <style>
        body { background-color: #f9f9f8; color: #383835; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Menu Trigger (Input Lookalike) */
        .search-bar {
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            transition: all 0.2s ease;
            border: 1px solid #e5e5e0;
        }
        .search-bar:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-color: #d4d4d0;
            cursor: pointer;
        }

        /* Tool Item */
        .tool-item {
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        .tool-item:hover {
            background: #f0f0ef;
            border-color: #e5e5e0;
        }

        /* Premium Logic */
        .is-premium .premium-lock { display: none; }
        .is-free .premium-only { pointer-events: none; opacity: 0.5; filter: grayscale(100%); }
    </style>
</head>
<body class="h-screen w-full flex flex-col items-center justify-center relative overflow-hidden selection:bg-orange-100">

    <!-- LOADING OVERLAY (Minimalist) -->
    <div id="loader" class="fixed inset-0 bg-[#f9f9f8] z-50 flex items-center justify-center">
        <div class="w-2 h-2 bg-ink rounded-full animate-ping"></div>
    </div>

    <!-- BACKGROUND ORNAMENTS -->
    <div class="absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-white to-transparent opacity-50 pointer-events-none"></div>

    <!-- TOP RIGHT: User Profile (Super Minimal) -->
    <div class="absolute top-6 right-6 z-20 flex items-center gap-3 animate-fade-in">
        <div class="text-xs text-stone-400 font-sans tracking-wide" id="userStatus">...</div>
        <div class="relative group cursor-pointer" onclick="doLogout()">
            <div class="w-8 h-8 rounded-full bg-[#ebebeb] flex items-center justify-center text-stone-600 text-xs font-serif italic border border-transparent group-hover:border-red-200 group-hover:text-red-500 transition-all">
                <span id="userInitial">U</span>
            </div>
            <!-- Gold Dot if Premium -->
            <div id="premiumDot" class="hidden absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-yellow-500 rounded-full border-2 border-[#f9f9f8]"></div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="w-full max-w-2xl px-6 flex flex-col items-center z-10">
        
        <!-- 1. GREETING (Serif, Elegant) -->
        <div class="mb-8 text-center animate-fade-in">
            <h1 class="font-serif text-3xl md:text-4xl text-ink mb-2">
                Selamat pagi, <span id="userName" class="italic text-stone-500">Creator</span>.
            </h1>
            <p class="font-sans text-stone-400 text-sm">Apa yang ingin kamu ciptakan hari ini?</p>
        </div>

        <!-- 2. THE TRIGGER (Looks like Claude's Input) -->
        <div onclick="openMenu()" class="search-bar w-full bg-white rounded-xl p-4 flex items-center justify-between group animate-fade-in" style="animation-delay: 0.1s;">
            <div class="flex items-center gap-3 text-stone-400">
                <i class="fas fa-sparkles text-orange-300"></i>
                <span class="font-sans text-stone-400 text-sm group-hover:text-stone-600 transition">Pilih layanan...</span>
            </div>
            <div class="w-6 h-6 rounded bg-stone-100 flex items-center justify-center text-[10px] text-stone-400">
                <i class="fas fa-arrow-right"></i>
            </div>
        </div>

    </main>

    <!-- 3. MODAL MENU (Hidden by default) -->
    <div id="menuOverlay" class="fixed inset-0 z-40 bg-[#f9f9f8]/95 backdrop-blur-sm hidden flex-col items-center justify-center p-6 opacity-0 transition-opacity duration-300">
        
        <!-- Close Button -->
        <button onclick="closeMenu()" class="absolute top-6 right-6 w-8 h-8 flex items-center justify-center text-stone-400 hover:text-stone-800 transition">
            <i class="fas fa-times"></i>
        </button>

        <div class="w-full max-w-2xl grid grid-cols-2 md:grid-cols-4 gap-3 animate-pop">
            
            <!-- ITEM 1: Filmmaker -->
            <a href="#" class="tool-item p-4 rounded-xl flex flex-col items-center gap-3 text-center cursor-pointer">
                <div class="text-xl text-stone-700"><i class="fas fa-video"></i></div>
                <span class="font-sans text-xs font-medium text-stone-600">Filmmaker</span>
            </a>

            <!-- ITEM 2: UGC (Premium) -->
            <a href="tool.html?id=servis2" class="tool-item premium-only p-4 rounded-xl flex flex-col items-center gap-3 text-center cursor-pointer relative">
                <div class="text-xl text-stone-700"><i class="fas fa-hashtag"></i></div>
                <span class="font-sans text-xs font-medium text-stone-600">UGC Auto</span>
                <i class="fas fa-lock absolute top-3 right-3 text-[8px] text-stone-300 premium-lock"></i>
            </a>

            <!-- ITEM 3: Kling (Premium) -->
            <a href="tool.html?id=servis3" class="tool-item premium-only p-4 rounded-xl flex flex-col items-center gap-3 text-center cursor-pointer relative">
                <div class="text-xl text-stone-700"><i class="fas fa-film"></i></div>
                <span class="font-sans text-xs font-medium text-stone-600">Kling Pro</span>
                <i class="fas fa-lock absolute top-3 right-3 text-[8px] text-stone-300 premium-lock"></i>
            </a>

            <!-- ITEM 4: F2F (Premium) -->
            <a href="tool.html?id=servis4" class="tool-item premium-only p-4 rounded-xl flex flex-col items-center gap-3 text-center cursor-pointer relative">
                <div class="text-xl text-stone-700"><i class="fas fa-layer-group"></i></div>
                <span class="font-sans text-xs font-medium text-stone-600">Consistent</span>
                <i class="fas fa-lock absolute top-3 right-3 text-[8px] text-stone-300 premium-lock"></i>
            </a>

            <!-- ITEM 5: Seedance (Premium) -->
            <a href="tool.html?id=servis5" class="tool-item premium-only p-4 rounded-xl flex flex-col items-center gap-3 text-center cursor-pointer relative">
                <div class="text-xl text-stone-700"><i class="fas fa-music"></i></div>
                <span class="font-sans text-xs font-medium text-stone-600">Seedance</span>
                <i class="fas fa-lock absolute top-3 right-3 text-[8px] text-stone-300 premium-lock"></i>
            </a>

            <!-- ITEM 6: VEO (Premium) -->
            <a href="tool.html?id=servis6" class="tool-item premium-only p-4 rounded-xl flex flex-col items-center gap-3 text-center cursor-pointer relative">
                <div class="text-xl text-stone-700"><i class="fas fa-magic"></i></div>
                <span class="font-sans text-xs font-medium text-stone-600">VEO 3.1</span>
                <i class="fas fa-lock absolute top-3 right-3 text-[8px] text-stone-300 premium-lock"></i>
            </a>
            
             <!-- ITEM 7: Character (Premium) -->
            <a href="tool.html?id=servis7" class="tool-item premium-only p-4 rounded-xl flex flex-col items-center gap-3 text-center cursor-pointer relative">
                <div class="text-xl text-stone-700"><i class="fas fa-user-circle"></i></div>
                <span class="font-sans text-xs font-medium text-stone-600">Character</span>
                <i class="fas fa-lock absolute top-3 right-3 text-[8px] text-stone-300 premium-lock"></i>
            </a>

            <!-- Request -->
            <a href="https://wa.me/6285841244290" target="_blank" class="tool-item p-4 rounded-xl flex flex-col items-center gap-3 text-center cursor-pointer">
                <div class="text-xl text-stone-300"><i class="fab fa-whatsapp"></i></div>
                <span class="font-sans text-xs font-medium text-stone-400">Request</span>
            </a>

        </div>

        <!-- Upgrade Prompt (Only Visible if Free) -->
        <div id="upgradePrompt" class="mt-8 hidden">
            <a href="pembayaran.html" class="text-xs font-sans text-stone-400 hover:text-stone-800 border-b border-stone-200 pb-0.5 transition">
                Unlock All Features (Upgrade)
            </a>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="absolute bottom-6 font-sans text-[10px] text-stone-300 uppercase tracking-widest">
        Orbit Systems &copy; 2026
    </footer>

    <!-- LOGIC -->
    <script>
        // --- UI Control ---
        const menuOverlay = document.getElementById('menuOverlay');

        function openMenu() {
            menuOverlay.classList.remove('hidden');
            // Sedikit delay biar transisi opacity jalan
            setTimeout(() => {
                menuOverlay.classList.remove('opacity-0');
            }, 10);
        }

        function closeMenu() {
            menuOverlay.classList.add('opacity-0');
            setTimeout(() => {
                menuOverlay.classList.add('hidden');
            }, 300);
        }

        // Close on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeMenu();
        });

        // --- Supabase & Logic ---
        const { createClient } = supabase;
        const _supabase = createClient(
            'https://xhjwmhoxrszzrwsmqhxi.supabase.co', 
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhoandtaG94cnN6enJ3c21xaHhpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc0NDg1MjUsImV4cCI6MjA4MzAyNDUyNX0.JfMp7BY0PMhTc3xV2CoM6fTLsHSIrLyJyj9WMgeVFDM'
        );

        async function init() {
            const { data: { session } } = await _supabase.auth.getSession();
            if (!session) {
                window.location.href = "index.html";
                return;
            }

            const user = session.user;
            const name = user.email.split('@')[0].replace(/[0-9]/g, ''); 
            const formattedName = name.charAt(0).toUpperCase() + name.slice(1);
            
            document.getElementById('userName').innerText = formattedName;
            document.getElementById('userInitial').innerText = formattedName.charAt(0);

            // Check Premium
            let isPremium = false;
            try {
                const { data } = await _supabase.from('profiles').select('is_premium').eq('id', user.id).single();
                if (data && data.is_premium) isPremium = true;
            } catch (e) {}

            applyStatus(isPremium);
            
            // Hide Loader
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
            }, 500);

            // Live User (Fake+Real)
            document.getElementById('userStatus').innerText = (Math.floor(Math.random() * 5) + 2) + " Online";
        }

        function applyStatus(isPremium) {
            const body = document.body;
            if (isPremium) {
                body.classList.add('is-premium');
                document.getElementById('premiumDot').classList.remove('hidden');
                // document.getElementById('userStatus').innerText += " â€¢ Pro";
            } else {
                body.classList.add('is-free');
                document.getElementById('upgradePrompt').classList.remove('hidden');
                
                // Alert if clicking locked item
                document.querySelectorAll('.premium-only').forEach(el => {
                    el.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        if(confirm("Fitur ini terkunci. Upgrade ke Pro?")) {
                            window.location.href = "pembayaran.html";
                        }
                    });
                });
            }
        }

        async function doLogout() {
            if(confirm('Log out?')) {
                await _supabase.auth.signOut();
                window.location.href = "index.html";
            }
        }

        init();
    </script>
</body>
</html>
